// translition.js

const translations = {
  en: {
    title: "Welcome to Aqil Volunteering",
    introText: "Join us to make a difference in your community through volunteering!",
    login: "Login",
    register: "Register",
    email: "Email",
    password: "Password",
    submit: "Submit",
    name: "Name",
    confirmPassword: "Confirm Password",
    dashboard: "Dashboard",
    welcome: "Welcome, Aqil!",
    info: "Here you can manage your volunteering projects, view applications, and more.",
    projects: "Your Projects",
    projectsInfo: "No projects created yet. Click to add a new one.",
    applications: "Volunteer Applications",
    applicationsInfo: "No applications at the moment.",
    login: "login",
    register: "register",
    p1_title: "ğŸŒŸ What is Aqil Volunteering?",
    p1: "Aqil Volunteering is a dynamic social platform connecting volunteers and organizations worldwide.",
    p2_title: "ğŸš€ Why Join Us?",
    p2: "Engage with meaningful projects, grow your skills, and make a positive impact.",
    copyright: "Â© 2025 Aqil. All rights reserved.",
    ball: "Hold me",
    background: "Vounteering Day",
    thanks: "Thanks",
    lecture: "Lecture",
    training: "Training",
    data_entry: "Data Entry",
    data_registration: "Data Registration",
    search_data: "Search data...",
    id_number: "ID Number",
    name: "Full Name",
    gender: "Gender",
    select_gender: "Select Gender",
    male: "Male",
    female: "Female",
    nationality: "Nationality",
    email: "Email",
    phone: "Phone Number",
    address: "Address",
    edit: "Edit",
    restore: "Restore",
    delete: "Delete",
    clear: "Clear All",
    submit: "Submit",
    thanks_title: "Thank You",
    thanks_message: "Your information has been received. We appreciate your contribution.",
    back_home: "Back to Home",
    lecture_title: "Lecture",
    lecture_message: "This page is under construction. Please check back later.",
    training_title: "Training",
    training_message: "This page is under construction. Please check back later.",
    passwordMismatch: "Passwords do not match",
    registrationFailed: "Registration failed",
    registrationSuccess: "Registration successful",
    serverConnectionError: "Error connecting to server",
    socialLinks: {
      facebook: "https://facebook.com/aqilvolunteer",
      instagram: "https://instagram.com/aqilvolunteer",
      whatsapp: "https://wa.me/1234567890"
    }
  },
  ar: {
    title: "Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø¹Ù‚ÙŠÙ„ Ù„Ù„ØªØ·ÙˆØ¹",
    introText: "Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ Ù„ØªÙØ­Ø¯Ø« ÙØ±Ù‚Ù‹Ø§ ÙÙŠ Ù…Ø¬ØªÙ…Ø¹Ùƒ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ·ÙˆØ¹!",
    login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
    register: "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",
    email: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
    password: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
    submit: "Ø¥Ø±Ø³Ø§Ù„",
    name: "Ø§Ù„Ø§Ø³Ù…",
    confirmPassword: "ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
    dashboard: "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",
    welcome: "Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ Ø¹Ù‚ÙŠÙ„!",
    info: "ÙŠÙ…ÙƒÙ†Ùƒ Ù‡Ù†Ø§ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø´Ø§Ø±ÙŠØ¹Ùƒ Ø§Ù„ØªØ·ÙˆØ¹ÙŠØ©ØŒ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŒ ÙˆØ§Ù„Ù…Ø²ÙŠØ¯",
    projects: "Ù…Ø´Ø§Ø±ÙŠØ¹Ùƒ",
    projectsInfo: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø§Ù„ÙŠØ§Ù‹. Ø§Ø¶ØºØ· Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯",
    applications: "Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†",
    applicationsInfo: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ",
    login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
    register: "ÙŠØ³Ø¬Ù„",
    p1_title: "ğŸŒŸÙ…Ø§ Ù‡ÙŠ Ø¹Ù‚ÙŠÙ„ Ù„Ù„ØªØ·ÙˆØ¹ØŸ",
    p1: "Ø¹Ù‚ÙŠÙ„ Ù„Ù„ØªØ·ÙˆØ¹ Ù‡ÙŠ Ù…Ù†ØµØ© Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© ØªØ±Ø¨Ø· Ø¨ÙŠÙ† Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† ÙˆØ§Ù„Ù…Ù†Ø¸Ù…Ø§Øª Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù…",
    p2_title: "ğŸš€Ù„Ù…Ø§Ø°Ø§ ØªÙ†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ØŸ",
    p2: "Ø´Ø§Ø±Ùƒ ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‡Ø§Ø¯ÙØ©ØŒ Ø·ÙˆÙ‘Ø± Ù…Ù‡Ø§Ø±Ø§ØªÙƒØŒ ÙˆØ§ØµÙ†Ø¹ ÙØ±Ù‚Ø§Ù‹ Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ§Ù‹ ÙÙŠ Ù…Ø¬ØªÙ…Ø¹Ùƒ",
    copyright: "Â© Ù¢Ù Ù¢Ù¥ Ø¹Ù‚ÙŠÙ„. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.",
    ball: "Ø§Ù…Ø³ÙƒÙ†ÙŠ",
    background: "ÙŠÙˆÙ… Ø§Ù„ØªØ·ÙˆØ¹ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ",
    thanks: "Ø´ÙƒØ±Ø§Ù‹",
    lecture: "Ù…Ø­Ø§Ø¶Ø±Ø©",
    training: "ØªØ¯Ø±ÙŠØ¨",
    data_entry: "Ø§Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª",
    data_registration: "ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª",
    search_data: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...",
    id_number: "Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ",
    name: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",
    gender: "Ø§Ù„Ø¬Ù†Ø³",
    select_gender: "Ø§Ø®ØªØ± Ø§Ù„Ø¬Ù†Ø³",
    male: "Ø°ÙƒØ±",
    female: "Ø£Ù†Ø«Ù‰",
    nationality: "Ø§Ù„Ø¬Ù†Ø³ÙŠØ©",
    email: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
    phone: "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",
    address: "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",
    edit: "ØªØ¹Ø¯ÙŠÙ„",
    restore: "Ø¥Ø±Ø¬Ø§Ø¹",
    delete: "Ø­Ø°Ù",
    clear: "Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„",
    submit: "Ø¥Ø±Ø³Ø§Ù„",
    thanks_title: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ",
    thanks_message: "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¨ÙŠØ§Ù†Ø§ØªÙƒ. Ù†Ø´ÙƒØ±Ùƒ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ù‡Ù…ØªÙƒ.",
    back_home: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
    lecture_title: "Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©",
    lecture_message: "Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹",
    training_title: "Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©",
    training_message: "Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹",
    passwordMismatch: "ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©",
    registrationFailed: "ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„",
    registrationSuccess: "ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­",
    serverConnectionError: "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…",
    socialLinks: {
      facebook: "https://facebook.com/aqilvolunteer",
      instagram: "https://instagram.com/aqilvolunteer",
      whatsapp: "https://wa.me/1234567890"
    }
  }
};


// Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù…ØªØ±Ø¬Ù…Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
function alertMessage(key) {
  const lang = localStorage.getItem("lang") || "en";
  const message = translations[lang]?.[key] || key;
  alert(message);
}


function getUserLang() {
  return localStorage.getItem("lang") || (navigator.language.startsWith("ar") ? "ar" : "en");
}

function setUserLang(lang) {
  localStorage.setItem("lang", lang);
}

function applyTranslation(lang) {
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
  document.body.style.textAlign = lang === "ar" ? "right" : "left";

  document.querySelectorAll("[data-translate]").forEach(el => {
    const key = el.getAttribute("data-translate");
    const text = translations[lang]?.[key];
    if (!text) return;

    if ((el.tagName === "INPUT" || el.tagName === "TEXTAREA") && "placeholder" in el) {
      el.placeholder = text;
    } else {
      el.textContent = text;
    }
  });

  const fb = document.getElementById("fb-link");
  const insta = document.getElementById("insta-link");
  const wa = document.getElementById("wa-link");
  const copy = document.getElementById("copyright");

  const links = translations[lang].socialLinks;
  if (fb) fb.href = links.facebook;
  if (insta) insta.href = links.instagram;
  if (wa) wa.href = links.whatsapp;
  if (copy) copy.textContent = translations[lang].copyright;

  const select = document.getElementById("language-select");
  if (select) select.value = lang;
}

document.addEventListener("DOMContentLoaded", () => {
  const lang = getUserLang();
  applyTranslation(lang);

  const select = document.getElementById("language-select");
  if (select) {
    select.addEventListener("change", (e) => {
      const newLang = e.target.value;
      setUserLang(newLang);
      applyTranslation(newLang);
    });
  }

  // Zoom functionality
  window.addEventListener("wheel", (e) => {
    if (e.ctrlKey) {
      e.preventDefault();
      let scale = Number(document.body.style.zoom) || 1;
      scale += e.deltaY < 0 ? 0.1 : -0.1;
      scale = Math.min(Math.max(0.5, scale), 2);
      document.body.style.zoom = scale;
    }
  }, { passive: false });

  // Load saved data if available
  const form = document.getElementById("registerForm");
  const fields = ["idNumber", "name", "gender", "nationality", "email", "phone", "address"];

  if(form) {
    fields.forEach((field) => {
      if (localStorage.getItem(field)) {
        form[field].value = localStorage.getItem(field);
      }
    });

    // Submit handler
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const payload = {
        full_name: form.name.value,
        id_number: form.idNumber.value,
        gender: form.gender.value,
        nationality: form.nationality.value,
        email: form.email.value,
        phone: form.phone.value,
        address: form.address.value,
      };

      try {
        const response = await fetch("http://localhost:5000/api/data-entry", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        if (response.ok) {
          alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
          form.reset();
        } else {
          alert("âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸.");
        }
      } catch (error) {
        console.error(error);
        alert("âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….");
      }
    });
  }
});
